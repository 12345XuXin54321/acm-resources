# P2197 【模板】Nim 游戏 

## 题意

有 $n$ 堆石子，每人每次可从任意一堆里取任意多枚石子扔掉。
可以取完，不能不取。每次只能从一堆里取。
最后没有石头可取的人就输了。

假如甲是先手，且告诉你这 $n$ 堆石子的数量。
请问有没有先手必胜的策略。

## 思路

当 $n$ 堆石子全部只剩下0个的时候，游戏结束。
此时，所有石子的数量的异或和为0

当异或和不为0的，一定有至少一堆石子个数不为0，
游戏还可以继续。

设每堆的石子个数为 $a_1, a_2, \dots, a_n$ ，
令 $k = a_1 \oplus a_2 \oplus \dots \oplus a_n$ ，
当 $k \neq 0$ 时，设二进制下， $k$ 的第 $\alpha$ 位为1，
容易看出 $\exists a_i$ 使 $a_i$ 的第 $\alpha$ 位也为1。
令 $a_i^{\prime} = a_i \oplus k$ 易证 $a_i^{\prime} < a_i$

因此 $k \neq 0$ 时，可以一步把 $k$ 变成0

而当 $k = 0$ 时，要么游戏结束，要么不管怎样那石子，都不可能维持在 $k = 0$ 的局面。

所有当 $k \neq 0$ 时，最优策略时拿走一些石子，使 $k = 0$ 。
当 $k = 0$ 时，是必败局面。

所以只需要判断开始的石子的异或和就能判断是否先手必胜。

## 题解代码

[代码](main.cpp)
