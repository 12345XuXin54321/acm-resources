# D. Scammy Game Ad

## 题意

有 $n$ 对栏杆，每个栏杆有两个操作
* 加 $a$ ：使人数加 $a$
* 乘 $a$ ：使人数乘 $a$

最开始左右两边各1人，两边的队伍分别进行两边栏杆的操作，
增加的人可以选择去任意一边的队伍，
但是已经进入队伍的人不能去另一边。

问最后最多有几人。

## 思路

### 贪心

最优情况是去最近有乘法的那一边，如果两边都有乘法则去更大的一边。
两边都是加法就看下一个栏杆。

### dp

以左边栏杆为例，右边类似。
只需要看乘法。

设 $dp_l[i]$ 为一个人跨过左边的栏杆，最多变成几个人。

* $L_i$ 为 $+ a_i$ 操作：原来的人位置不变， $dp_l[i] = dp_l[i + 1]$
* $L_i$ 为 $\times a_i$ 操作：增加的人可以选择更大的位置， $dp_l[i] = dp_l[i + 1] + (a - 1) \times max(dp_l[i + 1], dp_r[i + 1])$

初始的人能变成 $dp_l[0] + dp_r[0]$ 个人，
之后每次 $+ a_i$ ，能变成 $a_i \times max(dp_l[i + 1], dp_r[i + 1])$ 人